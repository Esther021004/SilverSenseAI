# π€ RAG μ‹μ¤ν… μ‹μ‘ν•κΈ° (λ‹¨κ³„λ³„ κ°€μ΄λ“)

## μ „μ²΄ ν”„λ΅μ„Έμ¤ μ”μ•½

```
1λ‹¨κ³„: ν¨ν‚¤μ§€ μ„¤μΉ (ν•„μ)
   β†“
2λ‹¨κ³„: λ²΅ν„° μ¤ν† μ–΄ κµ¬μ¶• (ν•„μ, OpenAI API ν‚¤ β ν•„μ” μ—†μ)
   β†“
3λ‹¨κ³„: OpenAI API ν‚¤ μ„¤μ • (μ§€μΉ¨ μƒμ„±μ— ν•„μ”)
   β†“
4λ‹¨κ³„: μ§€μΉ¨ μƒμ„± ν…μ¤νΈ (OpenAI API ν‚¤ β… ν•„μ”)
```

---

## π“¦ 1λ‹¨κ³„: ν¨ν‚¤μ§€ μ„¤μΉ (ν•„μ)

λ¨Όμ € ν•„μ”ν• Python ν¨ν‚¤μ§€λ“¤μ„ μ„¤μΉν•΄μ•Ό ν•©λ‹λ‹¤.

```bash
pip install -r requirements.txt
```

**μμƒ μ‹κ°„**: 2-5λ¶„ (μΈν„°λ„· μ†λ„μ— λ”°λΌ)

**μ„¤μΉλλ” μ£Όμ” ν¨ν‚¤μ§€**:
- LangChain (RAG ν”„λ μ„μ›ν¬)
- ChromaDB (λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤)
- sentence-transformers (ν•κµ­μ–΄ μ„λ² λ”© λ¨λΈ)
- PDF μ²λ¦¬ λΌμ΄λΈλ¬λ¦¬λ“¤

---

## π” 2λ‹¨κ³„: λ²΅ν„° μ¤ν† μ–΄ κµ¬μ¶• (ν•„μ, OpenAI API ν‚¤ ν•„μ” μ—†μ)

λ¬Έμ„λ¥Ό λ΅λ”©ν•κ³  λ²΅ν„° DBλ¥Ό μƒμ„±ν•©λ‹λ‹¤. **μ΄ λ‹¨κ³„λ” OpenAI API ν‚¤κ°€ ν•„μ” μ—†μµλ‹λ‹¤.**

```bash
python build_vectorstore.py
```

**μμƒ μ‹κ°„**: 5-15λ¶„ (λ¬Έμ„ μμ™€ μ»΄ν“¨ν„° μ„±λ¥μ— λ”°λΌ)
- μ²« μ‹¤ν–‰ μ‹ μ„λ² λ”© λ¨λΈ(`jhgan/ko-sroberta-multitask`) μλ™ λ‹¤μ΄λ΅λ“
- PDF λ¬Έμ„λ“¤μ„ μ½κ³  ν…μ¤νΈ μ¶”μ¶
- ν…μ¤νΈλ¥Ό μ²­ν¬λ΅ λ¶„ν• 
- μ„λ² λ”© μƒμ„± λ° λ²΅ν„° DB μ €μ¥

**μ΄ λ‹¨κ³„κ°€ μ„±κ³µν•λ©΄**:
- `./chroma_db` ν΄λ”κ°€ μƒμ„±λ©λ‹λ‹¤
- μ΄ν›„ λ²΅ν„° μ¤ν† μ–΄λ” μλ™μΌλ΅ λ΅λ”©λ©λ‹λ‹¤

**β οΈ μ£Όμ**: λ¬Έμ„κ°€ λ§κ±°λ‚ PDFκ°€ λ³µμ΅ν•λ©΄ μ‹κ°„μ΄ λ” κ±Έλ¦΄ μ μμµλ‹λ‹¤.

---

## π”‘ 3λ‹¨κ³„: OpenAI API ν‚¤ μ„¤μ • (μ§€μΉ¨ μƒμ„±μ— ν•„μ”)

μ§€μΉ¨ μƒμ„±μ„ μ„ν•΄μ„λ” OpenAI API ν‚¤κ°€ ν•„μ”ν•©λ‹λ‹¤.

### 3-1. OpenAI API ν‚¤ λ°κΈ‰λ°›κΈ°

1. [OpenAI Platform](https://platform.openai.com/api-keys) μ ‘μ†
2. λ΅κ·ΈμΈ ν›„ "API keys" λ©”λ‰΄ μ„ νƒ
3. "Create new secret key" ν΄λ¦­
4. API ν‚¤ λ³µμ‚¬ (ν•μ‹: `sk-...`)

### 3-2. .env νμΌ μƒμ„±

ν”„λ΅μ νΈ λ£¨νΈμ— `.env` νμΌμ„ μƒμ„±ν•κ³  λ‹¤μ λ‚΄μ© μ¶”κ°€:

```
OPENAI_API_KEY=sk-your-api-key-here
```

**μμ‹**:
```
OPENAI_API_KEY=sk-1234567890abcdefghijklmnopqrstuvwxyz
```

### β οΈ λ³΄μ• μ£Όμμ‚¬ν•­
- `.env` νμΌμ€ μ λ€ Gitμ— μ»¤λ°‹ν•μ§€ λ§μ„Έμ” (μ΄λ―Έ .gitignoreμ— ν¬ν•¨λμ–΄ μμ)
- API ν‚¤λ¥Ό μ½”λ“μ— μ§μ ‘ μ…λ ¥ν•μ§€ λ§μ„Έμ”

---

## β… 4λ‹¨κ³„: μ§€μΉ¨ μƒμ„± ν…μ¤νΈ (OpenAI API ν‚¤ ν•„μ”)

μ΄μ  μ‹¤μ λ΅ μ‘κΈ‰ μ§€μΉ¨μ„ μƒμ„±ν•΄λ³Ό μ μμµλ‹λ‹¤!

### λ°©λ²• 1: λΉ λ¥Έ μ‹μ‘ μ¤ν¬λ¦½νΈ (κ¶μ¥)

ν™κ²½μ„ ν™•μΈν•κ³  κ°„λ‹¨ν• ν…μ¤νΈλ¥Ό μλ™μΌλ΅ μ‹¤ν–‰ν•©λ‹λ‹¤:

```bash
python quick_start.py
```

μ΄ μ¤ν¬λ¦½νΈλ”:
- β… ν™κ²½ μ„¤μ • ν™•μΈ
- β… λ¬Έμ„ ν™•μΈ
- β… λ²΅ν„° μ¤ν† μ–΄ ν™•μΈ
- β… κ°„λ‹¨ν• ν…μ¤νΈ μ‹¤ν–‰ (μ„ νƒμ‚¬ν•­)

### λ°©λ²• 2: μμ  μ‹¤ν–‰

λ” μμ„Έν• μμ λ¥Ό λ³΄κ³  μ‹¶λ‹¤λ©΄:

```bash
python example_usage.py
```

μ΄ μ¤ν¬λ¦½νΈλ” 3κ°€μ§€ μ‹λ‚λ¦¬μ¤λ¥Ό ν…μ¤νΈν•©λ‹λ‹¤:
1. λ‚™μƒ μ‚¬κ³ 
2. ν™”μ¬ λ°μƒ
3. νΈν΅κ³¤λ€

### λ°©λ²• 3: μ§μ ‘ μ‚¬μ© (Python μ½”λ“)

```python
from rag.rag_system import RAGSystem

# μ‹μ¤ν… μ΄κΈ°ν™”
rag_system = RAGSystem(rebuild_vectorstore=False)

# μƒν™© μ •λ³΄
situation_info = {
    "disasterLarge": "κµ¬κΈ‰",
    "disasterMedium": "λ‚™μƒ",
    "urgencyLevel": "κΈ΄κΈ‰",
    "sentiment": "λ¶μ•",
    "triage": "μ μƒ‰"
}

# μ§€μΉ¨ μƒμ„±
result = rag_system.generate_guideline(
    situation_info,
    additional_context="μ“°λ¬μ§„ μƒνƒ"
)

print(result['guideline'])
```

---

## π“ λ‹¨κ³„λ³„ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] **1λ‹¨κ³„**: `pip install -r requirements.txt` μ‹¤ν–‰ μ™„λ£
- [ ] **2λ‹¨κ³„**: `python build_vectorstore.py` μ‹¤ν–‰ μ™„λ£
  - [ ] `chroma_db` ν΄λ”κ°€ μƒμ„±λμ—λ”μ§€ ν™•μΈ
- [ ] **3λ‹¨κ³„**: `.env` νμΌ μƒμ„± λ° OpenAI API ν‚¤ μ„¤μ •
- [ ] **4λ‹¨κ³„**: `python quick_start.py` λλ” `python example_usage.py` μ‹¤ν–‰ μ„±κ³µ

---

## β“ μμ£Ό λ¬»λ” μ§λ¬Έ (FAQ)

### Q1: λ²΅ν„° μ¤ν† μ–΄ κµ¬μ¶•λ§ ν•΄λ„ κ²€μƒ‰μ΄ κ°€λ¥ν•κ°€μ”?
**A**: λ„¤! λ²΅ν„° μ¤ν† μ–΄λ§ κµ¬μ¶•ν•λ©΄ λ¬Έμ„ κ²€μƒ‰μ€ κ°€λ¥ν•©λ‹λ‹¤. ν•μ§€λ§ **μ§€μΉ¨ μƒμ„±**μ€ OpenAI API ν‚¤κ°€ ν•„μ”ν•©λ‹λ‹¤.

### Q2: OpenAI API ν‚¤ μ—†μ΄ ν…μ¤νΈν•  μ μλ‚μ”?
**A**: 
- β… **λ²΅ν„° μ¤ν† μ–΄ κµ¬μ¶•**: κ°€λ¥ (λ΅μ»¬ λ¨λΈ μ‚¬μ©)
- β… **λ¬Έμ„ κ²€μƒ‰**: κ°€λ¥ (λ΅μ»¬ λ¨λΈ μ‚¬μ©)
- β **μ§€μΉ¨ μƒμ„±**: λ¶κ°€λ¥ (OpenAI API ν•„μ”)

κ²€μƒ‰λ§ ν…μ¤νΈν•κ³  μ‹¶λ‹¤λ©΄ `rag_system.search_documents("λ‚™μƒ μ‘κΈ‰μ²μΉ")`λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

### Q3: λ²΅ν„° μ¤ν† μ–΄ κµ¬μ¶•μ΄ μ‹¤ν¨ν–μ–΄μ”
**A**: λ‹¤μμ„ ν™•μΈν•μ„Έμ”:
- λ¬Έμ„κ°€ `document/` ν΄λ”μ— μλ”μ§€
- PDF νμΌμ΄ μ†μƒλμ§€ μ•μ•λ”μ§€
- μΈν„°λ„· μ—°κ²°μ΄ λμ–΄ μλ”μ§€ (μ„λ² λ”© λ¨λΈ λ‹¤μ΄λ΅λ“ ν•„μ”)

### Q4: OpenAI API ν‚¤κ°€ μ—†λ”λ° μΌλ‹¨ κµ¬μ¶•λ§ ν•κ³  μ‹¶μ–΄μ”
**A**: μ™„μ „ν κ°€λ¥ν•©λ‹λ‹¤!
1. `python build_vectorstore.py` μ‹¤ν–‰ (API ν‚¤ ν•„μ” μ—†μ)
2. λ‚μ¤‘μ— OpenAI API ν‚¤λ¥Ό λ°›μΌλ©΄ `.env` νμΌμ— μ¶”κ°€
3. `python example_usage.py` μ‹¤ν–‰

---

## π― μµμ†ν•μ μ‹μ‘ (API ν‚¤ μ—†μ΄)

OpenAI API ν‚¤κ°€ μ•„μ§ μ—†λ‹¤λ©΄:

```bash
# 1. ν¨ν‚¤μ§€ μ„¤μΉ
pip install -r requirements.txt

# 2. λ²΅ν„° μ¤ν† μ–΄ κµ¬μ¶• (API ν‚¤ ν•„μ” μ—†μ)
python build_vectorstore.py

# μ™„λ£! κ²€μƒ‰ κΈ°λ¥μ€ μ‚¬μ© κ°€λ¥
# λ‚μ¤‘μ— API ν‚¤λ¥Ό λ°›μΌλ©΄ μ§€μΉ¨ μƒμ„± κΈ°λ¥ μ‚¬μ© κ°€λ¥
```

---

## π“ λ¬Έμ  ν•΄κ²°

### μ¤λ¥: "λ²΅ν„° μ¤ν† μ–΄λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤"
β†’ `python build_vectorstore.py`λ¥Ό λ¨Όμ € μ‹¤ν–‰ν•μ„Έμ”

### μ¤λ¥: "OPENAI_API_KEYκ°€ μ„¤μ •λμ§€ μ•μ•μµλ‹λ‹¤"
β†’ `.env` νμΌμ„ μƒμ„±ν•κ³  API ν‚¤λ¥Ό μ¶”κ°€ν•μ„Έμ”

### μ¤λ¥: "λ΅λ”©λ λ¬Έμ„κ°€ μ—†μµλ‹λ‹¤"
β†’ `document/` ν΄λ”μ— PDF νμΌμ΄ μλ”μ§€ ν™•μΈν•μ„Έμ”

---

**λ‹¤μ λ‹¨κ³„**: λ¨λ“  λ‹¨κ³„κ°€ μ™„λ£λλ©΄ ν”„λ΅μ νΈμ λ‹¤λ¥Έ λ¨λ“(STT, AED)κ³Ό ν†µν•©ν•  μ μμµλ‹λ‹¤!

